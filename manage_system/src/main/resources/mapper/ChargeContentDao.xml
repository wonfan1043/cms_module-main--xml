<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.inext.manage_system.dao.invoice.ChargeContentDao">

    <!-- 請求内容作成 -->
    <insert id="addContent" parameterType="com.inext.manage_system.model.invoice.ChargeContent">
        INSERT INTO charge_content (invoice_no, item_id, quantity, unit_price, creater, create_datetime) 
        VALUES (#{invoiceNo}, #{itemId}, #{quantity}, #{unitPrice}, #{creater}, #{createDateTime}")
    </insert>

    <!-- 請求書更新より元請求内容を削除 -->
    <delete id="deleteAllContent" parameterType="String">
        DELETE FROM charge_content
        WHERE invoice_no = #{invoiceNo}
    </delete>

    <!-- 請求書削除より請求書内容の削除フラグを1へ -->
    <update id="deleteContent" parameterType="com.inext.manage_system.model.invoice.ChargeContent">
        UPDATE charge_content
        SET updater= #{updater}, updateDateTime = #{updateDateTime}, `delete` = 1
        WHERE invoice_no = #{invoiceNo}
    </update>

</mapper>